(()=>{"use strict";class e{constructor(e,t,n,r){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(t);const s=document.importNode(this.templateElement.content,!0);this.element=s.firstElementChild,r&&(this.element.id=r),this.attach(n)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}function t(e){let t=!0;return e.required&&(t=t&&0!==e.value.toString().trim().length),null!=e.minLength&&"string"==typeof e.value&&(t=t&&e.value.length>=e.minLength),null!=e.maxLength&&"string"==typeof e.value&&(t=t&&e.value.length<=e.maxLength),null!=e.min&&"number"==typeof e.value&&(t=t&&e.value>=e.min),null!=e.max&&"number"==typeof e.value&&(t=t&&e.value<=e.max),t}function n(e,t,n){const r=n.value;return{configurable:!0,get(){return r.bind(this)}}}var r;!function(e){e[e.Active=0]="Active",e[e.Finished=1]="Finished"}(r||(r={}));class s{constructor(e,t,n,r,s){this.id=e,this.title=t,this.description=n,this.people=r,this.status=s}}class i extends class{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new i),this.instance}addProject(e,t,n){const i=new s(Math.random().toString(),e,t,n,r.Active);this.projects.push(i),this.updateListeners()}moveProject(e,t){const n=this.projects.find((t=>t.id===e));n&&n.status!==t&&(n.status=t,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}const l=i.getInstance();class o extends e{constructor(){super("project-input","app",!0,"user-input"),this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}gatherUserInput(){const e=this.titleInputElement.value,n=this.descriptionInputElement.value,r=this.peopleInputElement.value,s={value:n,required:!0,minLength:5},i={value:+r,required:!0,min:1,max:5};return t({value:e,required:!0})&&t(s)&&t(i)?[e,n,+r]:void alert("Invalid input, please try again!")}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const t=this.gatherUserInput();if(Array.isArray(t)){const[e,n,r]=t;l.addProject(e,n,r),this.clearInputs()}}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([n],o.prototype,"submitHandler",null);class a extends e{constructor(e,t){super("single-project",e,!1,t.id),this.project=t,this.configure(),this.renderContent()}get persons(){return 1===this.project.people?"1 person":`${this.project.people} persons`}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){console.log("DragEnd")}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.persons+" assigned",this.element.querySelector("p").textContent=this.project.description}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([n],a.prototype,"dragStartHandler",null);var c=function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l};class d extends e{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(e){const t=e.dataTransfer.getData("text/plain");l.moveProject(t,"active"===this.type?r.Active:r.Finished)}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),l.addListener((e=>{const t=e.filter((e=>"active"===this.type?e.status===r.Active:e.status===r.Finished));this.assignedProjects=t,this.renderProjects()}))}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" PROJECTS"}renderProjects(){document.getElementById(`${this.type}-projects-list`).innerHTML="";for(const e of this.assignedProjects)new a(this.element.querySelector("ul").id,e)}}c([n],d.prototype,"dragOverHandler",null),c([n],d.prototype,"dropHandler",null),c([n],d.prototype,"dragLeaveHandler",null),new o,new d("active"),new d("finished")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YXJtaW5nLXVwLXdpdGgtdHlwZXNjcmlwdC8uL3NyYy9jb21wb25lbnRzL2Jhc2UtY29tcG9uZW50LnRzIiwid2VicGFjazovL3dhcm1pbmctdXAtd2l0aC10eXBlc2NyaXB0Ly4vc3JjL3V0aWwvdmFsaWRhdGlvbi50cyIsIndlYnBhY2s6Ly93YXJtaW5nLXVwLXdpdGgtdHlwZXNjcmlwdC8uL3NyYy9kZWNvcmF0b3JzL2F1dG9iaW5kLnRzIiwid2VicGFjazovL3dhcm1pbmctdXAtd2l0aC10eXBlc2NyaXB0Ly4vc3JjL21vZGVscy9wcm9qZWN0LnRzIiwid2VicGFjazovL3dhcm1pbmctdXAtd2l0aC10eXBlc2NyaXB0Ly4vc3JjL3N0YXRlL3Byb2plY3Qtc3RhdGUudHMiLCJ3ZWJwYWNrOi8vd2FybWluZy11cC13aXRoLXR5cGVzY3JpcHQvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWlucHV0LnRzIiwid2VicGFjazovL3dhcm1pbmctdXAtd2l0aC10eXBlc2NyaXB0Ly4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1pdGVtLnRzIiwid2VicGFjazovL3dhcm1pbmctdXAtd2l0aC10eXBlc2NyaXB0Ly4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1saXN0LnRzIiwid2VicGFjazovL3dhcm1pbmctdXAtd2l0aC10eXBlc2NyaXB0Ly4vc3JjL2FwcC50cyJdLCJuYW1lcyI6WyJDb21wb25lbnQiLCJ0ZW1wbGF0ZUlkIiwiaG9zdEVsZW1lbnRJZCIsImluc2VydEF0U3RhcnQiLCJuZXdFbGVtZW50SWQiLCJ0aGlzIiwidGVtcGxhdGVFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImhvc3RFbGVtZW50IiwiaW1wb3J0ZWROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRlbnQiLCJlbGVtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJpZCIsImF0dGFjaCIsImluc2VydEF0QmVnaW5uaW5nIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwidmFsaWRhdGUiLCJ2YWxpZGF0YWJsZUlucHV0IiwiaXNWYWxpZCIsInJlcXVpcmVkIiwidmFsdWUiLCJ0b1N0cmluZyIsInRyaW0iLCJsZW5ndGgiLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJtaW4iLCJtYXgiLCJhdXRvYmluZCIsIl8iLCJfMiIsImRlc2NyaXB0b3IiLCJvcmlnaW5hbE1ldGhvZCIsImNvbmZpZ3VyYWJsZSIsImJpbmQiLCJQcm9qZWN0U3RhdHVzIiwiUHJvamVjdCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJwZW9wbGUiLCJzdGF0dXMiLCJQcm9qZWN0U3RhdGUiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lckZuIiwicHVzaCIsInN1cGVyIiwicHJvamVjdHMiLCJpbnN0YW5jZSIsIm51bU9mUGVvcGxlIiwibmV3UHJvamVjdCIsIk1hdGgiLCJyYW5kb20iLCJBY3RpdmUiLCJ1cGRhdGVMaXN0ZW5lcnMiLCJwcm9qZWN0SWQiLCJuZXdTdGF0dXMiLCJwcm9qZWN0IiwiZmluZCIsInByaiIsInNsaWNlIiwicHJvamVjdFN0YXRlIiwiZ2V0SW5zdGFuY2UiLCJQcm9qZWN0SW5wdXQiLCJ0aXRsZUlucHV0RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkZXNjcmlwdGlvbklucHV0RWxlbWVudCIsInBlb3BsZUlucHV0RWxlbWVudCIsImNvbmZpZ3VyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdWJtaXRIYW5kbGVyIiwiZW50ZXJlZFRpdGxlIiwiZW50ZXJlZERlc2NyaXB0aW9uIiwiZW50ZXJlZFBlb3BsZSIsImRlc2NyaXB0aW9uVmFsaWRhdGFibGUiLCJwZW9wbGVWYWxpZGF0YWJsZSIsImFsZXJ0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJJbnB1dCIsImdhdGhlclVzZXJJbnB1dCIsIkFycmF5IiwiaXNBcnJheSIsImRlc2MiLCJhZGRQcm9qZWN0IiwiY2xlYXJJbnB1dHMiLCJQcm9qZWN0SXRlbSIsImhvc3RJZCIsInJlbmRlckNvbnRlbnQiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZWZmZWN0QWxsb3dlZCIsImNvbnNvbGUiLCJsb2ciLCJkcmFnU3RhcnRIYW5kbGVyIiwiZHJhZ0VuZEhhbmRsZXIiLCJ0ZXh0Q29udGVudCIsInBlcnNvbnMiLCJQcm9qZWN0TGlzdCIsInR5cGUiLCJhc3NpZ25lZFByb2plY3RzIiwidHlwZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJwcmpJZCIsImdldERhdGEiLCJtb3ZlUHJvamVjdCIsIkZpbmlzaGVkIiwicmVtb3ZlIiwiZHJhZ092ZXJIYW5kbGVyIiwiZHJhZ0xlYXZlSGFuZGxlciIsImRyb3BIYW5kbGVyIiwiYWRkTGlzdGVuZXIiLCJyZWxldmFudFByb2plY3RzIiwiZmlsdGVyIiwicmVuZGVyUHJvamVjdHMiLCJsaXN0SWQiLCJ0b1VwcGVyQ2FzZSIsImlubmVySFRNTCIsInByakl0ZW0iXSwibWFwcGluZ3MiOiJtQkFFTyxNQUFlQSxFQUtyQixZQUNDQyxFQUNBQyxFQUNBQyxFQUNBQyxHQUVBQyxLQUFLQyxnQkFBa0JDLFNBQVNDLGVBQy9CUCxHQUVESSxLQUFLSSxZQUFjRixTQUFTQyxlQUFlTixHQUUzQyxNQUFNUSxFQUFlSCxTQUFTSSxXQUM3Qk4sS0FBS0MsZ0JBQWdCTSxTQUNyQixHQUVEUCxLQUFLUSxRQUFVSCxFQUFhSSxrQkFDeEJWLElBQ0hDLEtBQUtRLFFBQVFFLEdBQUtYLEdBR25CQyxLQUFLVyxPQUFPYixHQUdMLE9BQU9jLEdBQ2RaLEtBQUtJLFlBQVlTLHNCQUNoQkQsRUFBb0IsYUFBZSxZQUNuQ1osS0FBS1EsVUN2QkQsU0FBU00sRUFBU0MsR0FDeEIsSUFBSUMsR0FBVSxFQStCZCxPQTlCSUQsRUFBaUJFLFdBQ3BCRCxFQUNDQSxHQUErRCxJQUFwREQsRUFBaUJHLE1BQU1DLFdBQVdDLE9BQU9DLFFBR3ZCLE1BQTlCTixFQUFpQk8sV0FDaUIsaUJBQTNCUCxFQUFpQkcsUUFFeEJGLEVBQ0NBLEdBQVdELEVBQWlCRyxNQUFNRyxRQUFVTixFQUFpQk8sV0FHaEMsTUFBOUJQLEVBQWlCUSxX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Y2VzQ29udGVudCI6WyIvLyBDb21wb25lbnQgQmFzZSBDbGFzc1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbXBvbmVudDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQsIFUgZXh0ZW5kcyBIVE1MRWxlbWVudD4ge1xyXG5cdHRlbXBsYXRlRWxlbWVudDogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuXHRob3N0RWxlbWVudDogVDtcclxuXHRlbGVtZW50OiBVO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHRlbXBsYXRlSWQ6IHN0cmluZyxcclxuXHRcdGhvc3RFbGVtZW50SWQ6IHN0cmluZyxcclxuXHRcdGluc2VydEF0U3RhcnQ6IGJvb2xlYW4sXHJcblx0XHRuZXdFbGVtZW50SWQ/OiBzdHJpbmdcclxuXHQpIHtcclxuXHRcdHRoaXMudGVtcGxhdGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcblx0XHRcdHRlbXBsYXRlSWRcclxuXHRcdCkhIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcblx0XHR0aGlzLmhvc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaG9zdEVsZW1lbnRJZCkhIGFzIFQ7XHJcblxyXG5cdFx0Y29uc3QgaW1wb3J0ZWROb2RlID0gZG9jdW1lbnQuaW1wb3J0Tm9kZShcclxuXHRcdFx0dGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudCxcclxuXHRcdFx0dHJ1ZVxyXG5cdFx0KTtcclxuXHRcdHRoaXMuZWxlbWVudCA9IGltcG9ydGVkTm9kZS5maXJzdEVsZW1lbnRDaGlsZCBhcyBVO1xyXG5cdFx0aWYgKG5ld0VsZW1lbnRJZCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuaWQgPSBuZXdFbGVtZW50SWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5hdHRhY2goaW5zZXJ0QXRTdGFydCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGF0dGFjaChpbnNlcnRBdEJlZ2lubmluZzogYm9vbGVhbikge1xyXG5cdFx0dGhpcy5ob3N0RWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXHJcblx0XHRcdGluc2VydEF0QmVnaW5uaW5nID8gJ2FmdGVyYmVnaW4nIDogJ2JlZm9yZWVuZCcsXHJcblx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdGFic3RyYWN0IGNvbmZpZ3VyZSgpOiB2b2lkO1xyXG5cdGFic3RyYWN0IHJlbmRlckNvbnRlbnQoKTogdm9pZDtcclxufVxyXG4iLCIvLyBWYWxpZGF0aW9uXHJcbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGFibGUge1xyXG5cdHZhbHVlOiBzdHJpbmcgfCBudW1iZXI7XHJcblx0cmVxdWlyZWQ/OiBib29sZWFuO1xyXG5cdG1pbkxlbmd0aD86IG51bWJlcjtcclxuXHRtYXhMZW5ndGg/OiBudW1iZXI7XHJcblx0bWluPzogbnVtYmVyO1xyXG5cdG1heD86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlKHZhbGlkYXRhYmxlSW5wdXQ6IFZhbGlkYXRhYmxlKSB7XHJcblx0bGV0IGlzVmFsaWQgPSB0cnVlO1xyXG5cdGlmICh2YWxpZGF0YWJsZUlucHV0LnJlcXVpcmVkKSB7XHJcblx0XHRpc1ZhbGlkID1cclxuXHRcdFx0aXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCAhPT0gMDtcclxuXHR9XHJcblx0aWYgKFxyXG5cdFx0dmFsaWRhdGFibGVJbnB1dC5taW5MZW5ndGggIT0gbnVsbCAmJlxyXG5cdFx0dHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdzdHJpbmcnXHJcblx0KSB7XHJcblx0XHRpc1ZhbGlkID1cclxuXHRcdFx0aXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLmxlbmd0aCA+PSB2YWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aDtcclxuXHR9XHJcblx0aWYgKFxyXG5cdFx0dmFsaWRhdGFibGVJbnB1dC5tYXhMZW5ndGggIT0gbnVsbCAmJlxyXG5cdFx0dHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdzdHJpbmcnXHJcblx0KSB7XHJcblx0XHRpc1ZhbGlkID1cclxuXHRcdFx0aXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLmxlbmd0aCA8PSB2YWxpZGF0YWJsZUlucHV0Lm1heExlbmd0aDtcclxuXHR9XHJcblx0aWYgKFxyXG5cdFx0dmFsaWRhdGFibGVJbnB1dC5taW4gIT0gbnVsbCAmJlxyXG5cdFx0dHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdudW1iZXInXHJcblx0KSB7XHJcblx0XHRpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID49IHZhbGlkYXRhYmxlSW5wdXQubWluO1xyXG5cdH1cclxuXHRpZiAoXHJcblx0XHR2YWxpZGF0YWJsZUlucHV0Lm1heCAhPSBudWxsICYmXHJcblx0XHR0eXBlb2YgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA9PT0gJ251bWJlcidcclxuXHQpIHtcclxuXHRcdGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPD0gdmFsaWRhdGFibGVJbnB1dC5tYXg7XHJcblx0fVxyXG5cdHJldHVybiBpc1ZhbGlkO1xyXG59XHJcbiIsIi8vIGF1dG9iaW5kIGRlY29yYXRvclxyXG5leHBvcnQgZnVuY3Rpb24gYXV0b2JpbmQoXzogYW55LCBfMjogc3RyaW5nLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpIHtcclxuXHRjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XHJcblx0Y29uc3QgYWRqRGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yID0ge1xyXG5cdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxyXG5cdFx0Z2V0KCkge1xyXG5cdFx0XHRjb25zdCBib3VuZEZuID0gb3JpZ2luYWxNZXRob2QuYmluZCh0aGlzKTtcclxuXHRcdFx0cmV0dXJuIGJvdW5kRm47XHJcblx0XHR9LFxyXG5cdH07XHJcblx0cmV0dXJuIGFkakRlc2NyaXB0b3I7XHJcbn1cclxuIiwiZXhwb3J0IGVudW0gUHJvamVjdFN0YXR1cyB7XHJcblx0QWN0aXZlLFxyXG5cdEZpbmlzaGVkLFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdCB7XHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwdWJsaWMgaWQ6IHN0cmluZyxcclxuXHRcdHB1YmxpYyB0aXRsZTogc3RyaW5nLFxyXG5cdFx0cHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcblx0XHRwdWJsaWMgcGVvcGxlOiBudW1iZXIsXHJcblx0XHRwdWJsaWMgc3RhdHVzOiBQcm9qZWN0U3RhdHVzXHJcblx0KSB7fVxyXG59XHJcbiIsImltcG9ydCB7IFByb2plY3QsIFByb2plY3RTdGF0dXMgfSBmcm9tICcuLi9tb2RlbHMvcHJvamVjdCc7XHJcblxyXG4vLyBQcm9qZWN0IFN0YXRlIE1hbmFnZW1lbnRcclxudHlwZSBMaXN0ZW5lcjxUPiA9IChpdGVtczogVFtdKSA9PiB2b2lkO1xyXG5cclxuY2xhc3MgU3RhdGU8VD4ge1xyXG5cdHByb3RlY3RlZCBsaXN0ZW5lcnM6IExpc3RlbmVyPFQ+W10gPSBbXTtcclxuXHJcblx0YWRkTGlzdGVuZXIobGlzdGVuZXJGbjogTGlzdGVuZXI8VD4pIHtcclxuXHRcdHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXJGbik7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdFN0YXRlIGV4dGVuZHMgU3RhdGU8UHJvamVjdD4ge1xyXG5cdHByaXZhdGUgcHJvamVjdHM6IFByb2plY3RbXSA9IFtdO1xyXG5cdHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBQcm9qZWN0U3RhdGU7XHJcblxyXG5cdHByaXZhdGUgY29uc3RydWN0b3IoKSB7XHJcblx0XHRzdXBlcigpO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGdldEluc3RhbmNlKCkge1xyXG5cdFx0aWYgKHRoaXMuaW5zdGFuY2UpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcblx0XHR9XHJcblx0XHR0aGlzLmluc3RhbmNlID0gbmV3IFByb2plY3RTdGF0ZSgpO1xyXG5cdFx0cmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcblx0fVxyXG5cclxuXHRhZGRQcm9qZWN0KHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIG51bU9mUGVvcGxlOiBudW1iZXIpIHtcclxuXHRcdGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgUHJvamVjdChcclxuXHRcdFx0TWF0aC5yYW5kb20oKS50b1N0cmluZygpLFxyXG5cdFx0XHR0aXRsZSxcclxuXHRcdFx0ZGVzY3JpcHRpb24sXHJcblx0XHRcdG51bU9mUGVvcGxlLFxyXG5cdFx0XHRQcm9qZWN0U3RhdHVzLkFjdGl2ZVxyXG5cdFx0KTtcclxuXHRcdHRoaXMucHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcclxuXHRcdHRoaXMudXBkYXRlTGlzdGVuZXJzKCk7XHJcblx0fVxyXG5cclxuXHRtb3ZlUHJvamVjdChwcm9qZWN0SWQ6IHN0cmluZywgbmV3U3RhdHVzOiBQcm9qZWN0U3RhdHVzKSB7XHJcblx0XHRjb25zdCBwcm9qZWN0ID0gdGhpcy5wcm9qZWN0cy5maW5kKChwcmopID0+IHByai5pZCA9PT0gcHJvamVjdElkKTtcclxuXHRcdGlmIChwcm9qZWN0ICYmIHByb2plY3Quc3RhdHVzICE9PSBuZXdTdGF0dXMpIHtcclxuXHRcdFx0cHJvamVjdC5zdGF0dXMgPSBuZXdTdGF0dXM7XHJcblx0XHRcdHRoaXMudXBkYXRlTGlzdGVuZXJzKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHVwZGF0ZUxpc3RlbmVycygpIHtcclxuXHRcdGZvciAoY29uc3QgbGlzdGVuZXJGbiBvZiB0aGlzLmxpc3RlbmVycykge1xyXG5cdFx0XHRsaXN0ZW5lckZuKHRoaXMucHJvamVjdHMuc2xpY2UoKSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcHJvamVjdFN0YXRlID0gUHJvamVjdFN0YXRlLmdldEluc3RhbmNlKCk7XHJcbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vYmFzZS1jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBWYWxpZGF0YWJsZSwgdmFsaWRhdGUgfSBmcm9tICcuLi91dGlsL3ZhbGlkYXRpb24nO1xyXG5pbXBvcnQgeyBhdXRvYmluZCB9IGZyb20gJy4uL2RlY29yYXRvcnMvYXV0b2JpbmQnO1xyXG5pbXBvcnQgeyBwcm9qZWN0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9wcm9qZWN0LXN0YXRlJztcclxuXHJcbi8vIFByb2plY3RJbnB1dCBDbGFzc1xyXG5leHBvcnQgY2xhc3MgUHJvamVjdElucHV0IGV4dGVuZHMgQ29tcG9uZW50PEhUTUxEaXZFbGVtZW50LCBIVE1MRm9ybUVsZW1lbnQ+IHtcclxuXHR0aXRsZUlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuXHRkZXNjcmlwdGlvbklucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuXHRwZW9wbGVJbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0c3VwZXIoJ3Byb2plY3QtaW5wdXQnLCAnYXBwJywgdHJ1ZSwgJ3VzZXItaW5wdXQnKTtcclxuXHRcdHRoaXMudGl0bGVJbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0JyN0aXRsZSdcclxuXHRcdCkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0JyNkZXNjcmlwdGlvbidcclxuXHRcdCkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdHRoaXMucGVvcGxlSW5wdXRFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdCcjcGVvcGxlJ1xyXG5cdFx0KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdFx0dGhpcy5jb25maWd1cmUoKTtcclxuXHR9XHJcblxyXG5cdGNvbmZpZ3VyZSgpIHtcclxuXHRcdHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnN1Ym1pdEhhbmRsZXIpO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyQ29udGVudCgpIHt9XHJcblxyXG5cdHByaXZhdGUgZ2F0aGVyVXNlcklucHV0KCk6IFtzdHJpbmcsIHN0cmluZywgbnVtYmVyXSB8IHZvaWQge1xyXG5cdFx0Y29uc3QgZW50ZXJlZFRpdGxlID0gdGhpcy50aXRsZUlucHV0RWxlbWVudC52YWx1ZTtcclxuXHRcdGNvbnN0IGVudGVyZWREZXNjcmlwdGlvbiA9IHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWU7XHJcblx0XHRjb25zdCBlbnRlcmVkUGVvcGxlID0gdGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQudmFsdWU7XHJcblxyXG5cdFx0Y29uc3QgdGl0bGVWYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7XHJcblx0XHRcdHZhbHVlOiBlbnRlcmVkVGl0bGUsXHJcblx0XHRcdHJlcXVpcmVkOiB0cnVlLFxyXG5cdFx0fTtcclxuXHRcdGNvbnN0IGRlc2NyaXB0aW9uVmFsaWRhdGFibGU6IFZhbGlkYXRhYmxlID0ge1xyXG5cdFx0XHR2YWx1ZTogZW50ZXJlZERlc2NyaXB0aW9uLFxyXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZSxcclxuXHRcdFx0bWluTGVuZ3RoOiA1LFxyXG5cdFx0fTtcclxuXHRcdGNvbnN0IHBlb3BsZVZhbGlkYXRhYmxlOiBWYWxpZGF0YWJsZSA9IHtcclxuXHRcdFx0dmFsdWU6ICtlbnRlcmVkUGVvcGxlLFxyXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZSxcclxuXHRcdFx0bWluOiAxLFxyXG5cdFx0XHRtYXg6IDUsXHJcblx0XHR9O1xyXG5cclxuXHRcdGlmIChcclxuXHRcdFx0IXZhbGlkYXRlKHRpdGxlVmFsaWRhdGFibGUpIHx8XHJcblx0XHRcdCF2YWxpZGF0ZShkZXNjcmlwdGlvblZhbGlkYXRhYmxlKSB8fFxyXG5cdFx0XHQhdmFsaWRhdGUocGVvcGxlVmFsaWRhdGFibGUpXHJcblx0XHQpIHtcclxuXHRcdFx0YWxlcnQoJ0ludmFsaWQgaW5wdXQsIHBsZWFzZSB0cnkgYWdhaW4hJyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBbZW50ZXJlZFRpdGxlLCBlbnRlcmVkRGVzY3JpcHRpb24sICtlbnRlcmVkUGVvcGxlXTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY2xlYXJJbnB1dHMoKSB7XHJcblx0XHR0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XHJcblx0XHR0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XHJcblx0XHR0aGlzLnBlb3BsZUlucHV0RWxlbWVudC52YWx1ZSA9ICcnO1xyXG5cdH1cclxuXHJcblx0QGF1dG9iaW5kXHJcblx0cHJpdmF0ZSBzdWJtaXRIYW5kbGVyKGV2ZW50OiBFdmVudCkge1xyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdGNvbnN0IHVzZXJJbnB1dCA9IHRoaXMuZ2F0aGVyVXNlcklucHV0KCk7XHJcblx0XHRpZiAoQXJyYXkuaXNBcnJheSh1c2VySW5wdXQpKSB7XHJcblx0XHRcdGNvbnN0IFt0aXRsZSwgZGVzYywgcGVvcGxlXSA9IHVzZXJJbnB1dDtcclxuXHRcdFx0cHJvamVjdFN0YXRlLmFkZFByb2plY3QodGl0bGUsIGRlc2MsIHBlb3BsZSk7XHJcblx0XHRcdHRoaXMuY2xlYXJJbnB1dHMoKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgRHJhZ2dhYmxlIH0gZnJvbSAnLi4vbW9kZWxzL2RyYWctZHJvcCc7XHJcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tICcuLi9tb2RlbHMvcHJvamVjdCc7XHJcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vYmFzZS1jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBhdXRvYmluZCB9IGZyb20gJy4uL2RlY29yYXRvcnMvYXV0b2JpbmQnO1xyXG5cclxuLy8gUHJvamVjdEl0ZW0gQ2xhc3NcclxuZXhwb3J0IGNsYXNzIFByb2plY3RJdGVtXHJcblx0ZXh0ZW5kcyBDb21wb25lbnQ8SFRNTFVMaXN0RWxlbWVudCwgSFRNTExJRWxlbWVudD5cclxuXHRpbXBsZW1lbnRzIERyYWdnYWJsZSB7XHJcblx0cHJpdmF0ZSBwcm9qZWN0OiBQcm9qZWN0O1xyXG5cclxuXHRnZXQgcGVyc29ucygpIHtcclxuXHRcdGlmICh0aGlzLnByb2plY3QucGVvcGxlID09PSAxKSB7XHJcblx0XHRcdHJldHVybiAnMSBwZXJzb24nO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuIGAke3RoaXMucHJvamVjdC5wZW9wbGV9IHBlcnNvbnNgO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y29uc3RydWN0b3IoaG9zdElkOiBzdHJpbmcsIHByb2plY3Q6IFByb2plY3QpIHtcclxuXHRcdHN1cGVyKCdzaW5nbGUtcHJvamVjdCcsIGhvc3RJZCwgZmFsc2UsIHByb2plY3QuaWQpO1xyXG5cdFx0dGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcclxuXHJcblx0XHR0aGlzLmNvbmZpZ3VyZSgpO1xyXG5cdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XHJcblx0fVxyXG5cclxuXHRAYXV0b2JpbmRcclxuXHRkcmFnU3RhcnRIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpIHtcclxuXHRcdGV2ZW50LmRhdGFUcmFuc2ZlciEuc2V0RGF0YSgndGV4dC9wbGFpbicsIHRoaXMucHJvamVjdC5pZCk7XHJcblx0XHRldmVudC5kYXRhVHJhbnNmZXIhLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7XHJcblx0fVxyXG5cclxuXHRkcmFnRW5kSGFuZGxlcihfOiBEcmFnRXZlbnQpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdEcmFnRW5kJyk7XHJcblx0fVxyXG5cclxuXHRjb25maWd1cmUoKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnRIYW5kbGVyKTtcclxuXHRcdHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgdGhpcy5kcmFnRW5kSGFuZGxlcik7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJDb250ZW50KCkge1xyXG5cdFx0dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyJykhLnRleHRDb250ZW50ID0gdGhpcy5wcm9qZWN0LnRpdGxlO1xyXG5cdFx0dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gzJykhLnRleHRDb250ZW50ID1cclxuXHRcdFx0dGhpcy5wZXJzb25zICsgJyBhc3NpZ25lZCc7XHJcblx0XHR0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigncCcpIS50ZXh0Q29udGVudCA9IHRoaXMucHJvamVjdC5kZXNjcmlwdGlvbjtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgRHJhZ1RhcmdldCB9IGZyb20gJy4uL21vZGVscy9kcmFnLWRyb3AnO1xyXG5pbXBvcnQgeyBQcm9qZWN0LCBQcm9qZWN0U3RhdHVzIH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QnO1xyXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuL2Jhc2UtY29tcG9uZW50JztcclxuaW1wb3J0IHsgYXV0b2JpbmQgfSBmcm9tICcuLi9kZWNvcmF0b3JzL2F1dG9iaW5kJztcclxuaW1wb3J0IHsgcHJvamVjdFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvcHJvamVjdC1zdGF0ZSc7XHJcbmltcG9ydCB7IFByb2plY3RJdGVtIH0gZnJvbSAnLi9wcm9qZWN0LWl0ZW0nO1xyXG5cclxuLy8gUHJvamVjdExpc3QgQ2xhc3NcclxuZXhwb3J0IGNsYXNzIFByb2plY3RMaXN0XHJcblx0ZXh0ZW5kcyBDb21wb25lbnQ8SFRNTERpdkVsZW1lbnQsIEhUTUxFbGVtZW50PlxyXG5cdGltcGxlbWVudHMgRHJhZ1RhcmdldCB7XHJcblx0YXNzaWduZWRQcm9qZWN0czogUHJvamVjdFtdO1xyXG5cclxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHR5cGU6ICdhY3RpdmUnIHwgJ2ZpbmlzaGVkJykge1xyXG5cdFx0c3VwZXIoJ3Byb2plY3QtbGlzdCcsICdhcHAnLCBmYWxzZSwgYCR7dHlwZX0tcHJvamVjdHNgKTtcclxuXHRcdHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IFtdO1xyXG5cclxuXHRcdHRoaXMuY29uZmlndXJlKCk7XHJcblx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcclxuXHR9XHJcblxyXG5cdEBhdXRvYmluZFxyXG5cdGRyYWdPdmVySGFuZGxlcihldmVudDogRHJhZ0V2ZW50KSB7XHJcblx0XHRpZiAoZXZlbnQuZGF0YVRyYW5zZmVyICYmIGV2ZW50LmRhdGFUcmFuc2Zlci50eXBlc1swXSA9PT0gJ3RleHQvcGxhaW4nKSB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGNvbnN0IGxpc3RFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpITtcclxuXHRcdFx0bGlzdEVsLmNsYXNzTGlzdC5hZGQoJ2Ryb3BwYWJsZScpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0QGF1dG9iaW5kXHJcblx0ZHJvcEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xyXG5cdFx0Y29uc3QgcHJqSWQgPSBldmVudC5kYXRhVHJhbnNmZXIhLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcclxuXHRcdHByb2plY3RTdGF0ZS5tb3ZlUHJvamVjdChcclxuXHRcdFx0cHJqSWQsXHJcblx0XHRcdHRoaXMudHlwZSA9PT0gJ2FjdGl2ZScgPyBQcm9qZWN0U3RhdHVzLkFjdGl2ZSA6IFByb2plY3RTdGF0dXMuRmluaXNoZWRcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRAYXV0b2JpbmRcclxuXHRkcmFnTGVhdmVIYW5kbGVyKF86IERyYWdFdmVudCkge1xyXG5cdFx0Y29uc3QgbGlzdEVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhO1xyXG5cdFx0bGlzdEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3BwYWJsZScpO1xyXG5cdH1cclxuXHJcblx0Y29uZmlndXJlKCkge1xyXG5cdFx0dGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5kcmFnT3ZlckhhbmRsZXIpO1xyXG5cdFx0dGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMuZHJhZ0xlYXZlSGFuZGxlcik7XHJcblx0XHR0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuZHJvcEhhbmRsZXIpO1xyXG5cclxuXHRcdHByb2plY3RTdGF0ZS5hZGRMaXN0ZW5lcigocHJvamVjdHM6IFByb2plY3RbXSkgPT4ge1xyXG5cdFx0XHRjb25zdCByZWxldmFudFByb2plY3RzID0gcHJvamVjdHMuZmlsdGVyKChwcmopID0+IHtcclxuXHRcdFx0XHRpZiAodGhpcy50eXBlID09PSAnYWN0aXZlJykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHByai5zdGF0dXMgPT09IFByb2plY3RTdGF0dXMuQWN0aXZlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gcHJqLnN0YXR1cyA9PT0gUHJvamVjdFN0YXR1cy5GaW5pc2hlZDtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IHJlbGV2YW50UHJvamVjdHM7XHJcblx0XHRcdHRoaXMucmVuZGVyUHJvamVjdHMoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyQ29udGVudCgpIHtcclxuXHRcdGNvbnN0IGxpc3RJZCA9IGAke3RoaXMudHlwZX0tcHJvamVjdHMtbGlzdGA7XHJcblx0XHR0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSEuaWQgPSBsaXN0SWQ7XHJcblx0XHR0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDInKSEudGV4dENvbnRlbnQgPVxyXG5cdFx0XHR0aGlzLnR5cGUudG9VcHBlckNhc2UoKSArICcgUFJPSkVDVFMnO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJQcm9qZWN0cygpIHtcclxuXHRcdGNvbnN0IGxpc3RFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG5cdFx0XHRgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgXHJcblx0XHQpISBhcyBIVE1MVUxpc3RFbGVtZW50O1xyXG5cdFx0bGlzdEVsLmlubmVySFRNTCA9ICcnO1xyXG5cdFx0Zm9yIChjb25zdCBwcmpJdGVtIG9mIHRoaXMuYXNzaWduZWRQcm9qZWN0cykge1xyXG5cdFx0XHRuZXcgUHJvamVjdEl0ZW0odGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhLmlkLCBwcmpJdGVtKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgUHJvamVjdElucHV0IH0gZnJvbSAnLi9jb21wb25lbnRzL3Byb2plY3QtaW5wdXQnO1xyXG5pbXBvcnQgeyBQcm9qZWN0TGlzdCB9IGZyb20gJy4vY29tcG9uZW50cy9wcm9qZWN0LWxpc3QnO1xyXG5cclxubmV3IFByb2plY3RJbnB1dCgpO1xyXG5uZXcgUHJvamVjdExpc3QoJ2FjdGl2ZScpO1xyXG5uZXcgUHJvamVjdExpc3QoJ2ZpbmlzaGVkJyk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=